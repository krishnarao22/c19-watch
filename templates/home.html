{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}
<div class="d-flex justify-content-center col-12 mt-5 mb-5">
    <div id="mainMap" style="position: relative; width:100%; height: 700px"></div>

        <script>
        var mainMap = new Datamap({
            scope: 'world',
            element: document.getElementById("mainMap"),
            fills: {
                defaultFill: 'FFFFFF',
                'vlow': '#ffa6a6',
                'low': '#ff7575',
                'medium': '#ed6b6b',
                'high': '#ed5a5a',
                'vhigh': '#eb2f2f',
                'nothing': '#FFFFFF'
            },
            geographyConfig: {
                hideAntarctica: true,
                borderColor: '#000000',
                popupTemplate: function(geography, data) { //this function should just return a string
                    return '<div class="hoverinfo"><strong>' + geography.properties.name + '\nTotal Cases: ' + data.numCases + '\tTotal Deaths: ' + data.numDeaths + '</strong></div>';
                },
            },

            data: {

                {% for c in theDict %}
                    {{ c }}: {
                        fillKey: '{{ colorDict[c]|string }}',
                        numCases: {{ theDict[c]|string }},
                        numDeaths: {{ deathDict[c]|string }}
                    },
                {% endfor %}

            },


        });
        </script>

    </div>

    <div class="col-12 d-flex justify-content-center">

        <h5 style="color: white">* If a country is white, either this country has no cases :) <strong>or</strong> this website can't process the number of cases for this country :/</h5>

    </div>
{% endblock %}